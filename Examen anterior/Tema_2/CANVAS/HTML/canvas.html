<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Uso del elemento Canvas en HTML5</title>
  <link rel="stylesheet" href="../Estilos/estilos.css" />
</head>

<body>
  <header>
    <h1>Introducción al elemento <code>&lt;canvas&gt;</code> en HTML5</h1>
    <p>
      El elemento <code>&lt;canvas&gt;</code> es una superficie para dibujar gráficos dinámicos mediante JavaScript.
      Permite crear imágenes, gráficos, animaciones y otras visualizaciones en un entorno bidimensional.
    </p>
  </header>

  <main>
    <!-- Resumen sobre la etiqueta Canvas -->
    <section id="resumen-canvas">
      <details>
        <summary>
          <h2>La Etiqueta Canvas</h2>
        </summary>
        <p>
          La etiqueta <code>&lt;canvas&gt;</code> permite dibujar gráficos dinámicos mediante JavaScript. A diferencia
          de
          SVG, <code>Canvas</code> no es un elemento del DOM y su contenido es un solo plano de píxeles.
        </p>
      </details>
    </section>

    <!-- Ejemplo básico de Canvas -->
    <section id="ejemplo-basico-canvas">
      <details>
        <summary>
          <h2>Ejemplo Básico de Canvas</h2>
        </summary>
        <p>El siguiente ejemplo muestra cómo dibujar un rectángulo relleno y un contorno:</p>
        <canvas id="miCanvasBasico" width="300" height="150" class="canvas-example">
          Tu navegador no soporta la etiqueta <code>&lt;canvas&gt;</code>.
        </canvas>
        <script>
          document.querySelector('#ejemplo-basico-canvas details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              const canvas = document.getElementById('miCanvasBasico');
              const ctx = canvas.getContext('2d');

              // Dibuja un rectángulo relleno de color
              ctx.fillStyle = '#FF8F43';
              ctx.fillRect(20, 20, 100, 50);

              // Dibuja un rectángulo de contorno
              ctx.strokeStyle = '#8f9814';
              ctx.lineWidth = 3;
              ctx.strokeRect(150, 50, 100, 50);
            }
          });
        </script>
        <pre>
        <code>const canvas = document.getElementById('miCanvasBasico');
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#FF8F43';
        ctx.fillRect(20, 20, 100, 50);
        ctx.strokeStyle = '#8f9814';
        ctx.lineWidth = 3;
        ctx.strokeRect(150, 50, 100, 50);</code>
      </pre>
      </details>
    </section>

    <!-- Rectángulo rojo -->
    <section>
      <details>
        <summary>
          <h2>1. Rectángulo Relleno en Rojo</h2>
        </summary>
        <canvas id="myCanvas" width="200" height="100"></canvas>
        <script>
          document.querySelector('#myCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var c = document.getElementById("myCanvas");
              var cxt = c.getContext("2d");
              cxt.fillStyle = "#FF0000";
              cxt.fillRect(0, 0, 150, 75);
            }
          });
        </script>
        <pre>
            <code>var c = document.getElementById("myCanvas");
            var cxt = c.getContext("2d");
            cxt.fillStyle = "#FF0000";
            cxt.fillRect(0, 0, 150, 75);</code>
                    </pre>
      </details>
    </section>

    <!-- Líneas y triángulo -->
    <section>
      <details>
        <summary>
          <h2>2. Dibujar Líneas y Triángulo</h2>
        </summary>
        <canvas id="lineCanvas" width="300" height="300"></canvas>
        <script>
          document.querySelector('#lineCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var lineCanvas = document.getElementById("lineCanvas");
              var ctx = lineCanvas.getContext("2d");
              ctx.beginPath();
              ctx.moveTo(5, 5);
              ctx.lineTo(5, 295);
              ctx.moveTo(295, 5);
              ctx.lineTo(295, 295);
              ctx.lineWidth = 1;
              ctx.strokeStyle = "#CC0000";
              ctx.stroke();
              ctx.beginPath();
              ctx.moveTo(300, 200);
              ctx.lineTo(200, 150);
              ctx.lineTo(200, 0);
              ctx.closePath();
              ctx.stroke();
            }
          });
        </script>
        <pre>
        <code>ctx.beginPath();
        ctx.moveTo(5, 5);
        ctx.lineTo(5, 295);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(300, 200);
        ctx.lineTo(200, 150);
        ctx.lineTo(200, 0);
        ctx.closePath();
        ctx.stroke();</code>
                </pre>
      </details>
    </section>

    <!-- Arco y círculo -->
    <section>
      <details>
        <summary>
          <h2>3. Dibujar Arco y Círculo</h2>
        </summary>
        <canvas id="arcCanvas" width="300" height="300"></canvas>
        <script>
          document.querySelector('#arcCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var arcCanvas = document.getElementById("arcCanvas");
              var ctx = arcCanvas.getContext("2d");
              ctx.beginPath();
              ctx.arc(150, 150, 50, 0, 2 * Math.PI);
              ctx.lineWidth = 10;
              ctx.strokeStyle = "yellow";
              ctx.stroke();
              ctx.fillStyle = "#FF0000";
              ctx.beginPath();
              ctx.arc(70, 18, 15, 0, Math.PI * 2, true);
              ctx.closePath();
              ctx.fill();
            }
          });
        </script>
        <pre>
<code>ctx.beginPath();
ctx.arc(150, 150, 50, 0, 2 * Math.PI);
ctx.lineWidth = 10;
ctx.strokeStyle = "yellow";
ctx.stroke();
ctx.fillStyle = "#FF0000";
ctx.arc(70, 18, 15, 0, Math.PI * 2, true);
ctx.fill();</code>
        </pre>
      </details>
    </section>

    <!-- Texto en Canvas -->
    <section>
      <details>
        <summary>
          <h2>4. Dibujar Texto en Canvas</h2>
        </summary>
        <canvas id="textCanvas" width="200" height="100"></canvas>
        <script>
          document.querySelector('#textCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var textCanvas = document.getElementById("textCanvas");
              var ctx = textCanvas.getContext("2d");
              ctx.font = 'Bold 20px Tahoma';
              ctx.textAlign = 'center';
              ctx.fillStyle = 'black';
              ctx.fillText('INTERFAZ', 50, 50);
            }
          });
        </script>
        <pre>
<code>ctx.font = 'Bold 20px Tahoma';
ctx.textAlign = 'center';
ctx.fillStyle = 'black';
ctx.fillText('INTERFAZ', 50, 50);</code>
        </pre>
      </details>
    </section>

    <!-- Imágenes en Canvas -->
    <section>
      <details>
        <summary>
          <h2>5. Dibujar Imágenes en Canvas</h2>
        </summary>
        <canvas id="imageCanvas" width="300" height="200"></canvas>
        <script>
          var imgCanvas = document.getElementById("imageCanvas");
          var ctx = imgCanvas.getContext("2d");
          var img = new Image();
          img.src = 'https://www.mundodeportivo.com/alfabeta/hero/2024/08/el-anime-de-dandadan-se-estrenara-el-3-de-octubre-de-2024.jpg?width=768&aspect_ratio=16:9&format=nowebp';
          img.onload = cargaImagen = () => {
            ctx.drawImage(img, 10, 10);
          };
        </script>
        <pre>
<code>var img = new Image();
img.src = 'img/ejemplo1.png';
img.onload = function(){
    ctx.drawImage(img, 10, 10);
};</code>
        </pre>
      </details>
    </section>




    <!-- Uso de Gradientes, Sombras y Transparencia -->
    <section id="gradientes-sombras-transparencia">
      <details>
        <summary>
          <h2>6. Uso de Gradientes, Sombras y Transparencia</h2>
        </summary>

        <!-- Gradiente lineal -->
        <h3>Gradiente Lineal</h3>
        <canvas id="gradienteLinealCanvas" width="250" height="150"></canvas>
        <script>
          document.querySelector('#gradienteLinealCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var canvas = document.getElementById("gradienteLinealCanvas");
              var ctx = canvas.getContext("2d");
              var grd = ctx.createLinearGradient(0, 0, 175, 50);
              grd.addColorStop(0, "#FF0000");
              grd.addColorStop(1, "#00FF00");
              ctx.fillStyle = grd;
              ctx.fillRect(0, 0, 175, 50);
            }
          });
        </script>
        <pre>
<code>var grd = ctx.createLinearGradient(0, 0, 175, 50);
grd.addColorStop(0, "#FF0000");
grd.addColorStop(1, "#00FF00");
ctx.fillStyle = grd;
ctx.fillRect(0, 0, 175, 50);</code>
        </pre>

        <!-- Gradiente radial -->
        <h3>Gradiente Radial</h3>
        <canvas id="gradienteRadialCanvas" width="250" height="150"></canvas>
        <script>
          document.querySelector('#gradienteRadialCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var canvas = document.getElementById("gradienteRadialCanvas");
              var ctx = canvas.getContext("2d");
              var grd = ctx.createRadialGradient(80, 125, 25, 125, 125, 120);
              grd.addColorStop(0, "#8DF");
              grd.addColorStop(1, "#04B");
              ctx.fillStyle = grd;
              ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
          });
        </script>
        <pre>
<code>var grd = ctx.createRadialGradient(80, 125, 25, 125, 125, 120);
grd.addColorStop(0, "#8DF");
grd.addColorStop(1, "#04B");
ctx.fillStyle = grd;
ctx.fillRect(0, 0, canvas.width, canvas.height);</code>
        </pre>

        <!-- Sombras -->
        <h3>Sombras</h3>
        <canvas id="sombrasCanvas" width="250" height="150"></canvas>
        <script>
          document.querySelector('#sombrasCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var canvas = document.getElementById("sombrasCanvas");
              var ctx = canvas.getContext("2d");
              ctx.shadowBlur = 30;
              ctx.shadowColor = "black";
              ctx.fillStyle = "blue";
              ctx.fillRect(50, 50, 150, 75);
            }
          });
        </script>
        <pre>
<code>ctx.shadowBlur = 30;
ctx.shadowColor = "black";
ctx.fillStyle = "blue";
ctx.fillRect(50, 50, 150, 75);</code>
        </pre>

        <!-- Transparencia -->
        <h3>Transparencia</h3>
        <canvas id="transparenciaCanvas" width="250" height="150"></canvas>
        <script>
          document.querySelector('#transparenciaCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var canvas = document.getElementById("transparenciaCanvas");
              var ctx = canvas.getContext("2d");
              ctx.globalAlpha = 0.75;
              ctx.fillStyle = "#F00";
              ctx.fillRect(60, 20, 75, 50);
              ctx.fillStyle = "#0F0";
              ctx.fillRect(90, 50, 75, 50);
              ctx.fillStyle = "#00F";
              ctx.fillRect(120, 80, 75, 50);
            }
          });
        </script>
        <pre>
<code>ctx.globalAlpha = 0.75;
ctx.fillStyle = "#F00";
ctx.fillRect(60, 20, 75, 50);
ctx.fillStyle = "#0F0";
ctx.fillRect(90, 50, 75, 50);
ctx.fillStyle = "#00F";
ctx.fillRect(120, 80, 75, 50);</code>
        </pre>

        <!-- Escalera utilizando un bucle -->
        <h3>Escalera con Bucle</h3>
        <canvas id="escaleraCanvas" width="150" height="150"></canvas>
        <script>
          document.querySelector('#escaleraCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var canvas = document.getElementById("escaleraCanvas");
              var ctx = canvas.getContext("2d");
              ctx.beginPath();
              ctx.moveTo(1, 1);
              for (var i = 1; i < 100; i += 5) {
                if ((i % 2) != 0) {
                  ctx.lineTo(i + 5, i);
                } else {
                  ctx.lineTo(i, i + 5);
                }
              }
              ctx.lineTo(1, 100);
              ctx.closePath();
              ctx.stroke();
            }
          });
        </script>
        <pre>
<code>ctx.beginPath();
ctx.moveTo(1, 1);
for (var i = 1; i < 100; i += 5) {
  if ((i % 2) != 0) {
    ctx.lineTo(i + 5, i);
  } else {
    ctx.lineTo(i, i + 5);
  }
}
ctx.lineTo(1, 100);
ctx.closePath();
ctx.stroke();</code>
        </pre>
      </details>
    </section>





    <!-- Creación de Patrones -->
    <section id="creacion-patrones">
      <details>
        <summary>
          <h2>7. Creación de Patrones</h2>
        </summary>
        <p>Este ejemplo muestra cómo crear un patrón repetido en el lienzo utilizando una imagen de fondo.</p>

        <canvas id="patronCanvas" width="300" height="300"></canvas>
        <script>
          document.querySelector('#patronCanvas').closest('details').addEventListener('toggle', function (event) {
            if (event.target.open) {
              var canvas = document.getElementById("patronCanvas");
              var ctx = canvas.getContext("2d");

              // Crear una imagen para el patrón
              var patron = new Image();
              patron.src = "https://www.mundodeportivo.com/alfabeta/hero/2024/08/el-anime-de-dandadan-se-estrenara-el-3-de-octubre-de-2024.jpg?width=768&aspect_ratio=16:9&format=nowebp"; // Asegúrate de que esta ruta sea correcta
              patron.onload = function () {
                // Crear el patrón y aplicarlo como relleno
                ctx.fillStyle = ctx.createPattern(patron, "repeat");
                ctx.fillRect(50, 50, canvas.width - 100, canvas.height - 100);

                // Aplicar el patrón como contorno
                ctx.strokeStyle = ctx.createPattern(patron, "repeat");
                ctx.lineWidth = 20;
                ctx.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);
              };
            }
          });
        </script>
        <pre>
  <code>var canvas = document.getElementById("patronCanvas");
  var ctx = canvas.getContext("2d");
  var patron = new Image();
  patron.src = "images/pattern.png";
  patron.onload = function() {
    ctx.fillStyle = ctx.createPattern(patron, "repeat");
    ctx.fillRect(50, 50, canvas.width - 100, canvas.height - 100);
    ctx.strokeStyle = ctx.createPattern(patron, "repeat");
    ctx.lineWidth = 20;
    ctx.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);
  };</code>
          </pre>
      </details>
    </section>


    <!-- Creación de Patrones con Canvas -->
    <section id="patrones-canvas">
      <details>
        <summary>
          <h2>8. Creación de Patrones desde Otro Canvas</h2>
        </summary>
        <p>Este ejemplo muestra cómo crear un patrón en un canvas usando otro canvas como origen del patrón.</p>

        <!-- Canvas para el patrón -->
        <canvas id="patron" width="10" height="15">No tiene soporte para canvas</canvas>

        <!-- Canvas principal donde se aplicará el patrón -->
        <canvas id="lienzo1" width="200" height="160">No tiene soporte para canvas</canvas>

        <script>
          // Dibujar en el canvas de patrón
          var canvasP = document.getElementById("patron");
          if (canvasP && canvasP.getContext) {
            var ctxP = canvasP.getContext("2d");
            if (ctxP) {
              ctxP.lineWidth = 1;
              ctxP.strokeStyle = "#ccc";
              ctxP.beginPath();
              ctxP.moveTo(canvasP.width, 0);
              ctxP.lineTo(0, canvasP.height);
              ctxP.stroke();
            }
          }

          // Crear el patrón en el canvas principal
          var canvas1 = document.getElementById("lienzo1");
          if (canvas1 && canvas1.getContext) {
            var ctx1 = canvas1.getContext("2d");
            if (ctx1) {
              ctx1.save();
              ctx1.fillStyle = ctx1.createPattern(canvasP, "repeat");
              ctx1.fillRect(0, 0, canvas1.width, canvas1.height);
              ctx1.restore();
              ctx1.font = "18px Arial";
              ctx1.textAlign = "center";
              ctx1.textBaseline = "middle";
              ctx1.fillText("lienzo1", canvas1.width / 2, canvas1.height / 2);
            }
          }
        </script>
        <pre>
      <code>
        var canvasP = document.getElementById("patron");
        if (canvasP && canvasP.getContext) {
          var ctxP = canvasP.getContext("2d");
          if (ctxP) {
            ctxP.lineWidth = 1;
            ctxP.strokeStyle = "#ccc";
            ctxP.beginPath();
            ctxP.moveTo(canvasP.width, 0);
            ctxP.lineTo(0, canvasP.height);
            ctxP.stroke();
          }
        }

        var canvas1 = document.getElementById("lienzo1");
        if (canvas1 && canvas1.getContext) {
          var ctx1 = canvas1.getContext("2d");
          if (ctx1) {
            ctx1.save();
            ctx1.fillStyle = ctx1.createPattern(canvasP, "repeat");
            ctx1.fillRect(0, 0, canvas1.width, canvas1.height);
            ctx1.restore();
            ctx1.font = "18px Arial";
            ctx1.textAlign = "center";
            ctx1.textBaseline = "middle";
            ctx1.fillText("lienzo1", canvas1.width / 2, canvas1.height / 2);
          }
        }
      </code>
    </pre>
      </details>
    </section>

    <section style="padding-top: 20px;">
      <details>
        <summary>
          <h2>9. Cambiar Color A Una Imagen</h2>
        </summary>
      <div style=" border-color: black; border-width: 5px; border-style: dashed;">
        <p style="font-family: sans-serif; font-size: 20px; font-weight: bolder; padding: 10px;">5. Convierte una imagen de tu elección a color sepia modificando el color de cada uno de los píxeles
          sabiendo que para ello hay que usar la fórmula indicada a continuación. Toma como base el ejemplo
          donde se convierte la imagen a blanco y negro para trabajar con los colores de los píxeles.</p>
      
          <canvas id="imagen" width="600" height="680"></canvas>
      </div>   
      <script>
        //Imagen canvas ejercicio 5.
    var canvasImagen = document.getElementById('imagen');
    var ctxImagen = canvasImagen.getContext("2d");
    var img = new Image();
    img.crossOrigin = "anonymous"; // Intenta cargar la imagen con CORS
    img.src = 'https://i.postimg.cc/DzsMYk0q/79597e39-a88f-4314-b5dc-96a02b345001.jpg';

    img.onload = function() {
        // Dibuja la imagen en el canvas
        ctxImagen.drawImage(img, 0, 0);

        // Obtiene los datos de la imagen en el canvas
        var imageData = ctxImagen.getImageData(0, 0, canvasImagen.width, canvasImagen.height);
        var data = imageData.data;

        // Recorre cada píxel y aplica las fórmulas con las condiciones
        for (var i = 0; i < data.length; i += 4) {
            var r = data[i];     // Valor R del píxel
            var g = data[i + 1]; // Valor G del píxel
            var b = data[i + 2]; // Valor B del píxel

            // Calcula los nuevos valores tr, tg, tb
            var tr = Math.trunc(0.393 * r + 0.769 * g + 0.189 * b);
            var tg = Math.trunc(0.349 * r + 0.686 * g + 0.168 * b);
            var tb = Math.trunc(0.272 * r + 0.534 * g + 0.131 * b);

            // Aplica las condiciones para truncar los valores
            data[i] = tr > 255 ? 255 : tr;       // Si tr > 255, R = 255, si no R = tr
            data[i + 1] = tg > 255 ? 255 : tg;   // Si tg > 255, G = 255, si no G = tg
            data[i + 2] = tb > 255 ? 255 : tb;   // Si tb > 255, B = 255, si no B = tb
            // data[i + 3] es el valor Alpha, lo dejamos sin cambios
        }

        // Actualiza el canvas con los nuevos datos
        ctxImagen.putImageData(imageData, 0, 0);
    };

      </script>
    </details>
    </section>


  </main>

  <footer>
    <p>&copy; 2024 - Ejemplo Canvas por Ian Miguel Soler</p>
  </footer>

  <script src="../JavaScript/script.js"></script>
</body>

</html>